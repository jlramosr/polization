<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="pz-game-cell">

  <template>

    <style>
      :host {
        display: block;
        background: transparent;
        opacity: 0.8;
      }

      :host([visible][type="land"]) {
        /*background: #C9F2D6;*/
        background: #fff;
      }

      :host([visible][type="sea"]) {
        /*background: #ABB4EF;*/
        background: #ddd;
      }

      :host(:hover) {
        opacity: 0.86;
      }

      :host([active]) {
        opacity: 1;
      }
    </style>

    {{positionX}},{{positionY}}

  </template>

  <script>

    Polymer({

      is: 'pz-game-cell',

      properties: {

        width: Number,

        positionX: Number,

        positionY: Number,

        type: {
          type: String,
          reflectToAttribute: true,
          value: 'land'
        },

        visible: {
          type: Boolean,
          reflectToAttribute: true,
          value: true
        },

        active: {
          type: Boolean,
          reflectToAttribute: true,
          value: false
        },
      },

      attached() {
        this.style.width = this.width + 'px';
        this.style.height = this.width + 'px';
        this._toggleListeners(true);
      },

      detached() {
        this._toggleListeners(false);
      },

      _toggleListeners(enable) {
        const m = enable ? 'addEventListener' : 'removeEventListener';
        if (this.user == this.appUser) {
          this[m]('pointermove', this._pointerMove);
          this[m]('pointerleave', this._pointerLeave);
          this[m]('pointerenter', this._pointerEnter);
        }  
      },

      _pointerMove() {
        this.fire('cell-pointer-move', this);
      },

      _pointerEnter() {
        this.fire('cell-pointer-enter', this);
      },

      _pointerLeave() {
        this.fire('cell-pointer-leave', this);
      }

    });

  </script>

</dom-module>
